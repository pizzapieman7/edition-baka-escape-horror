controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    projectile = sprites.createProjectileFromSprite(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . 4 . . . . . 
        . . . . 2 . . . . 4 4 . . . . . 
        . . . . 2 4 . . 4 5 4 . . . . . 
        . . . . . 2 4 d 5 5 4 . . . . . 
        . . . . . 2 5 5 5 5 4 . . . . . 
        . . . . . . 2 5 5 5 5 4 . . . . 
        . . . . . . 2 5 4 2 4 4 . . . . 
        . . . . . . 4 4 . . 2 4 4 . . . 
        . . . . . 4 4 . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, Render.getRenderSpriteInstance(), Render.getAttribute(Render.attribute.dirX) * 50, Render.getAttribute(Render.attribute.dirY) * 50)
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    projectile = sprites.createProjectileFromSprite(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . 4 4 . . . . . . . 
        . . . . . . 4 5 5 4 . . . . . . 
        . . . . . . 2 5 5 2 . . . . . . 
        . . . . . . . 2 2 . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, Render.getRenderSpriteInstance(), Render.getAttribute(Render.attribute.dirX) * 50, Render.getAttribute(Render.attribute.dirY) * 50)
})
info.onScore(12, function () {
    game.gameOver(true)
})
statusbars.onZero(StatusBarKind.EnemyHealth, function (status) {
    sprites.destroy(status.spriteAttachedTo())
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`myTile8`, function (sprite, location) {
    tiles.setCurrentTilemap(tilemap`level3`)
    tiles.placeOnRandomTile(mySprite, assets.tile`myTile3`)
    level = 2
})
function enemySetup (mySprite: Sprite) {
    statusbar = statusbars.create(20, 4, StatusBarKind.EnemyHealth)
    statusbar.setColor(2, 12)
    statusbar.attachToSprite(mySprite)
}
sprites.onOverlap(SpriteKind.Projectile, SpriteKind.Enemy, function (sprite, otherSprite) {
    info.changeScoreBy(1)
    sprites.destroy(sprite)
    statusbars.getStatusBarAttachedTo(StatusBarKind.EnemyHealth, otherSprite).value += -25
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    info.changeLifeBy(-1)
    sprites.destroy(otherSprite, effects.disintegrate, 500)
    scene.cameraShake(4, 500)
})
let statusbar: StatusBarSprite = null
let level = 0
let projectile: Sprite = null
let mySprite: Sprite = null
tiles.setCurrentTilemap(tilemap`level5`)
mySprite = Render.getRenderSpriteVariable()
tiles.placeOnRandomTile(mySprite, assets.tile`myTile3`)
Render.setViewMode(ViewMode.raycastingView)
let mySprite2 = sprites.create(img`
    ..............5555..............
    ............5555555.............
    ...........555544555............
    ........5.55554554555...........
    ........55555445554555..........
    .......555554455554555..........
    ..22...55544554455544555..22....
    ..22...55445544444554555..22....
    ..22..5445544555544454455.22....
    .222..5455455555555445455..22...
    .22...54544ccc5ccccc45455..22...
    .22....455cbbbccbbbcc5455..22...
    22.....54cbbabcbbaabcc45....22..
    22......4cbaaabbaaaabc5.....22..
    .22.....5cbb1fbbba1fcc.....22...
    .22......c2bbbbbbbbbc......22...
    .22...bbbc222bbbbb22cbbb...22...
    ..22.bb11c2d22bbb222c11b..22....
    ..222b111c2dd22bb222c11bb222....
    ...22b111c22dd2b222cc111b22.....
    ....2b1111c22d222d2c1111b2......
    .....b1111cc22dddd2c1111b.......
    .....b11111cc2ddd22c1111b.......
    .....b111111cc2222cc1111b.......
    .....b1111111cc22cc11111b.......
    .....b111111111ccc111111b.......
    .....b111111111111111111b.......
    .....bb1111111111111111bb.......
    ......bbb1111111bb111bbb........
    ........bbbbbbbbbbbbbb..........
    ..........bc.....bc.............
    ..........bcc....bcc............
    `, SpriteKind.Enemy)
enemySetup(mySprite2)
animation.runImageAnimation(
mySprite2,
[img`
    ..............5555..............
    ............5555555.............
    ...........555544555............
    ........5.55554554555...........
    ........55555445554555..........
    .......555554455554555..........
    ..22...55544554455544555..22....
    ..22...55445544444554555..22....
    ..22..5445544555544454455.22....
    .222..5455455555555445455..22...
    .22...54544ccc5ccccc45455..22...
    .22....455cbbbccbbbcc5455..22...
    22.....54cbbabcbbaabcc45....22..
    22......4cbaaabbaaaabc5.....22..
    .22.....5cbb1fbbba1fcc.....22...
    .22......c2bbbbbbbbbc......22...
    .22...bbbc222bbbbb22cbbb...22...
    ..22.bb11c2d22bbb222c11b..22....
    ..222b111c2dd22bb222c11bb222....
    ...22b111c22dd2b222cc111b22.....
    ....2b1111c22d222d2c1111b2......
    .....b1111cc22dddd2c1111b.......
    .....b11111cc2ddd22c1111b.......
    .....b111111cc2222cc1111b.......
    .....b1111111cc22cc11111b.......
    .....b111111111ccc111111b.......
    .....b111111111111111111b.......
    .....bb1111111111111111bb.......
    ......bbb1111111bb111bbb........
    ........bbbbbbbbbbbbbb..........
    ..........bc.....bc.............
    ..........bcc....bcc............
    `,img`
    ..............5555..............
    ............5555555.............
    ...........555544555............
    ........5.55554554555...........
    ........55555445554555..........
    .......555554455554555..........
    .......55544554455544555........
    .......55445544444554555........
    ......5445544555544454455.......
    ......5455455555555445455.......
    ......54544ccc5ccccc45455.......
    .......455cbbbccbbbcc5455.......
    .......54cbbabcbbaabcc45........
    ........4cbaaabbaaaabc5.........
    ........5cbb1fbbba1fcc..........
    .........c2bbbbbbbbbc...........
    ......bbbc222bbbbb22cbbb........
    .....bb11c2d22bbb222c11b........
    ....2b111c2dd22bb222c11bb2......
    ...22b111c22dd2b222cc111b22.....
    ..222b1111c22d222d2c1111b222....
    ..22.b1111cc22dddd2c1111b.22....
    ..22.b11111cc2ddd22c1111b.222...
    .22..b111111cc2222cc1111b..22...
    .22..b1111111cc22cc11111b..22...
    .22..b111111111ccc111111b..22...
    .22..b111111111111111111b..22...
    .22..bb1111111111111111bb..22...
    .2222.bbb1111111bb111bbb.2222...
    .2222...bbbbbbbbbbbbbb...2222...
    .2222.....bc.....bc......2222...
    ..........bcc....bcc............
    `],
500,
true
)
tiles.placeOnRandomTile(mySprite2, assets.tile`myTile3`)
let mySprite3 = sprites.create(img`
    ................................
    ..............222222............
    ..............222..222..........
    .............22222...22.........
    ............fffffff...2.........
    ...........f7777777f...2........
    ...........f77fff77f...22.......
    ...........f7fdcdf7f....11d.....
    ...........f7fdddf7f...d11......
    ...........f77fff77f...ddd......
    ............f77777f.............
    ............f72227f.............
    ............f72727f.............
    ............ff777ff.............
    ...........fbbfffbbf............
    ...........fbcccccbf............
    ..........fbbcccccbbf...........
    ..........fbcccccccbf...........
    .........fcbcccccccbbf..........
    .........fbbccccccccbf..........
    .........fccccccccccbf..........
    ..........ffccbbbbcff...........
    ..........77f77777f77...........
    ..........77f77777f77...........
    .........777f77f77f777..........
    ..........7.f77f77f.............
    ............f77f77f.............
    ............f77f77f.............
    ..........fff77f77fff...........
    ..........f7777f7777f...........
    ..........f7777f7777f...........
    ..........fffffffffff...........
    `, SpriteKind.Enemy)
enemySetup(mySprite3)
animation.runImageAnimation(
mySprite3,
[img`
    ................................
    ..............222222............
    ..............222..222..........
    .............22222...22.........
    ............fffffff...2.........
    ...........f7777777f...2........
    ...........f77fff77f...22.......
    ...........f7fd8df7f....11d.....
    ...........f7fdddf7f...d11......
    ...........f77fff77f...ddd......
    ............f77777f.............
    ............f72227f.............
    ............f72727f.............
    ............ff777ff.............
    ...........fbbfffbbf............
    ...........fbcccccbf............
    ..........fbbcccccbbf...........
    ..........fbcccccccbf...........
    .........fcbcccccccbbf..........
    .........fbbccccccccbf..........
    .........fccccccccccbf..........
    ..........ffccbbbbcff...........
    ..........77f77777f77...........
    ..........77f77777f77...........
    .........777f77f77f777..........
    ..........7.f77f77f.............
    ............f77f77f.............
    ............f77f77f.............
    ..........fff77f77fff...........
    ..........f7777f7777f...........
    ..........f7777f7777f...........
    ..........fffffffffff...........
    `,img`
    ................................
    ..............222222............
    ..............222..222..........
    .............22222...22.........
    ............fffffff...2.........
    ...........f7777777f...2........
    ...........f77fff77f...22.......
    ...........f7fd2df7f....11d.....
    ...........f7fdddf7f...d11......
    ...........f77fff77f...ddd......
    ............f77777f.............
    ............f72227f.............
    ............f72727f.............
    ............ff777ff.............
    ...........fbbfffbbf............
    ...........fbcccccbf............
    ..........fbbcccccbbf...........
    ..........fbcccccccbf...........
    .........fcbcccccccbbf..........
    .........fbbccccccccbf..........
    .........fccccccccccbf..........
    ..........ffccbbbbcff...........
    ..........77f77777f77...........
    ..........77f77777f77...........
    .........777f77f77f777..........
    ..........7.f77f77f.............
    ............f77f77f.............
    ............f77f77f.............
    ..........fff77f77fff...........
    ..........f7777f7777f...........
    ..........f7777f7777f...........
    ..........fffffffffff...........
    `],
50,
true
)
tiles.placeOnRandomTile(mySprite3, assets.tile`myTile3`)
let mysprite4 = sprites.create(img`
    ....................
    ....................
    .........88.........
    ........8888........
    ......33444433......
    ......12f44f21......
    ........4444........
    ........4cc4........
    ...44666644666644...
    .....6666666666.....
    .......666666.......
    .......666666.......
    .......666666.......
    .......777777.......
    .......777777.......
    .......77..77.......
    `, SpriteKind.Enemy)
enemySetup(mysprite4)
animation.runImageAnimation(
mysprite4,
[img`
    ....................
    ....................
    .........88.........
    ........8888........
    ......33444433......
    ......12f44f21......
    ........4444........
    ........4cc4........
    ...44666644666644...
    .....6666666666.....
    .......666666.......
    .......666666.......
    .......666666.......
    .......777777.......
    .......777777.......
    .......77..77.......
    `,img`
    ....................
    ....................
    .........88.........
    ........8888........
    ......33444433......
    ......12f44f21......
    ........4444........
    ........4cc4........
    .....6666446666.....
    .....6666666666.....
    .....6666666666.....
    .....4.666666.4.....
    .....4.666666.4.....
    .......777777.......
    .......777777.......
    .......77..77.......
    `],
50,
true
)
tiles.placeOnRandomTile(mysprite4, assets.tile`myTile3`)
forever(function () {
    if (spriteutils.distanceBetween(mySprite, mySprite2) < 1000) {
        mySprite2.follow(mySprite, 15)
    } else {
        mySprite2.follow(null)
    }
    if (spriteutils.distanceBetween(mySprite, mySprite3) < 1000) {
        mySprite3.follow(mySprite, 15)
    } else {
        mySprite3.follow(null)
    }
    if (spriteutils.distanceBetween(mySprite, mysprite4) < 1000) {
        mysprite4.follow(mySprite, 15)
    } else {
        mysprite4.follow(null)
    }
})
